IO: WORD 0xAABB
I: WORD 0x0
START: LD IO
PUSH
CALL AC_PRINT
PUSH
CALL AC_PRINT
LD #0x18
PUSH
CALL AC_PRINT
HLT

AC_PRINT: IN 0xD
AND #0x40
BEQ AC_PRINT
LD #0x0A
OUT 0xC

LD #16
ST I
LD &0x1
PRINT_LOOP:ROL
PUSH
LD #0x30
ADC #0x0
PUSH
S1: IN 0xD
AND #0x40
BEQ S1
POP
OUT 0xC
POP
LOOP I
JUMP PRINT_LOOP

LD &0x1

SWAP
ST &0x1
SWAP

SWAP
POP

RET